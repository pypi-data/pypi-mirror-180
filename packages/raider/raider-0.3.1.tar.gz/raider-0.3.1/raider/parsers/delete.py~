import os
import argparse

from raider import Raider
from raider.search import Search
from raider.utils import get_project_dir


def add_new_parser(parser) -> None:
    new_parser = parser.add_parser(
        "new", help="Create new projects and hyfiles"
    )

    new_parser.add_argument(
        "project", nargs="?", help="Project name (will be created if doesn't exist)")
    new_parser.add_argument(
        "hyfiles", nargs="?", help="Add new hyfiles to the project")


def run_new_command(args):
    raider = Raider()
    logger = raider.logger
    project_dir = get_project_dir(args.project)
    if os.path.isdir(project_dir):
        raider.logger.info("Project \"%s\" already exists, not creating new directory.", args.project)
    else:
        os.makedirs(project_dir)
        raider.logger.info("Created new project \"%s\" located at %s.", args.project, project_dir)
