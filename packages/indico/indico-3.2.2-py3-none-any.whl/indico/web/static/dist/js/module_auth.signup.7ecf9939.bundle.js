"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4438],{66494:(e,a,t)=>{var i=t(89793),n=t.n(i),r=t(60216),s=t.n(r),l=t(32735),o=t(12788),d=t(25591),m=t(48060),c=t(25899),u=t(67986),f=t(57176),p=t(33344),g=t(40327),b=t(19306),E=t(59090);function y(e){let{cancelURL:a,moderated:t,initialValues:i,hasPredefinedAffiliations:r,showAccountForm:s,syncedValues:o,emails:y,affiliationMeta:w,hasPendingUser:v,mandatoryFields:h}=e;return l.createElement(d.Form,{onSubmit:async(e,a)=>{const t=(0,p.hS)(e,a);let i;delete t.password_confirm,r?t.affiliation_data&&(t.affiliation=t.affiliation_data.text.trim(),t.affiliation_id=t.affiliation_data.id,delete t.affiliation_data):delete t.affiliation_data;try{i=await E.l2.post(location.href,t)}catch(e){return(0,p.qf)(e,r?{affiliation:"affiliation_data"}:{})}location.href=i.data.redirect,await new Promise((()=>{}))},initialValues:i,initialValuesEqual:n(),subscription:{submitting:!0},validate:e=>{const a={};return e.password&&e.password_confirm&&e.password_confirm!==e.password&&(a.password_confirm=b.vN.string("Passwords must match")),a}},(e=>l.createElement(m.Z,{onSubmit:e.handleSubmit},!s&&l.createElement(d.Field,{name:"synced_fields",isEqual:n(),render:()=>null}),v&&l.createElement(c.Z,{info:!0},l.createElement(b.vN,null,"There is already some information in Indico that concerns you. We are going to link it automatically.")),l.createElement(g.pg,{legend:b.vN.string("User information"),active:s||t},y.length>1?l.createElement(f.xF,{name:"email",label:b.vN.string("Email address"),options:y.map((e=>({key:e,value:e,text:e}))),syncedValues:o,required:!0}):l.createElement(f.zm,{name:"email",label:b.vN.string("Email address"),syncedValues:o,readOnly:!0}),l.createElement(m.Z.Group,{widths:"equal"},l.createElement(f.zm,{name:"first_name",label:b.vN.string("First name"),required:!0,syncedValues:o}),l.createElement(f.zm,{name:"last_name",label:b.vN.string("Last name"),required:!0,syncedValues:o})),r?l.createElement(f.wp,{name:"affiliation_data",required:t&&h.includes("affiliation"),syncName:"affiliation",syncedValues:o,currentAffiliation:w}):l.createElement(f.zm,{name:"affiliation",label:b.vN.string("Affiliation"),required:t&&h.includes("affiliation"),syncedValues:o}),"address"in o&&l.createElement(f.a0,{name:"address",label:b.vN.string("Address"),syncedValues:o}),"phone"in o&&l.createElement(f.zm,{name:"phone",label:b.vN.string("Phone number"),syncedValues:o})),s&&l.createElement(g.pg,{legend:b.vN.string("Login details")},l.createElement(p._t,{name:"username",label:b.vN.string("Username"),required:!0}),l.createElement(m.Z.Group,{widths:"equal"},l.createElement(p._t,{name:"password",type:"password",label:b.vN.string("Password"),autoComplete:"new-password",required:!0}),l.createElement(p._t,{name:"password_confirm",type:"password",label:b.vN.string("Confirm password"),autoComplete:"new-password",required:!0}))),t&&l.createElement(g.pg,{legend:b.vN.string("Account moderation")},l.createElement(c.Z,{info:!0},l.createElement(b.vN,null,"Each new account needs to be approved by an administrator. We will send you an email as soon as your request has been approved.")),l.createElement(g.wY,{required:h.includes("comment"),name:"comment",initialValue:"",label:b.vN.string("Comment"),description:b.vN.string("You can provide additional information or a comment for the administrators who will review your registration.")})),l.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.createElement(p.Ei,{disabledUntilChange:!1,label:t?b.vN.string("Submit registration request"):b.vN.string("Create my Indico profile"),className:"submit-button"}),l.createElement(m.Z.Field,{disabled:e.submitting},l.createElement(u.Z,{as:"a",href:a,disabled:e.submitting},l.createElement(b.vN,null,"Cancel")))))))}y.propTypes={cancelURL:s().string.isRequired,moderated:s().bool.isRequired,initialValues:s().object.isRequired,hasPredefinedAffiliations:s().bool.isRequired,showAccountForm:s().bool.isRequired,syncedValues:s().object.isRequired,emails:s().arrayOf(s().string).isRequired,affiliationMeta:s().object,hasPendingUser:s().bool,mandatoryFields:s().arrayOf(s().string).isRequired},y.defaultProps={affiliationMeta:null,hasPendingUser:!1},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#signup-container");if(!e)return;const a=JSON.parse(e.dataset.config);o.render(l.createElement(y,a),e)}))}},e=>{e.O(0,[5514,3044,8592],(()=>{return a=66494,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_auth.signup.7ecf9939.bundle.js.map