(self.webpackChunk=self.webpackChunk||[]).push([[3827],{98791:()=>{window.setupBadgePrinting=function(e){const t=$("#template"),n=$("#page_layout"),a=$("#dashed_border"),i=$("#page_size"),r=$("#page_orientation"),s=$(".margin-editor"),l=$(".info");function o(e,t,n){({A0:"A2",A1:"A3",A2:"A4",A3:"A5",A4:"A6",A5:"A7",A6:"A8"})[t]===e.format&&n===e.orientation?$("#page_layout option[value='foldable']").prop("disabled",!1):($("#page_layout option[value='foldable']").prop("disabled",!0),"foldable"===$("#page_layout :selected").val()&&$("#page_layout :selected").next().prop("selected",!0))}t.on("change",(function(){const t=$(this),a=e[parseInt(t.val(),10)];n.closest(".form-group").toggle(!!a.backside_tpl_id),n.val("front_only"),o(a,i.val(),r.val())})).change(),n.on("change",(function(){s.add(l).toggle("foldable"!==$(this).val()),a.closest(".form-group").toggle("foldable"!==$(this).val())})).change(),i.add(r).on("change",(function(){o(e[parseInt(t.val(),10)],i.val(),r.val()),n.change()})).change()}},48430:(e,t,n)=>{"use strict";var a=n(20011),i=n(90567),r=n.n(i),s=n(32735),l=n(12788),o=(n(17388),n(70967),n(98791),n(60216)),c=n.n(o),d=n(19306),u=n(47169),m=n(73537),p=n(41612),v=n(33344),g=n(95524),_=n(59090),h=n(25591),y=n(48060),f=n(67986),b=n(25899),E=n(53926);const j={name:c().string.isRequired,required:c().bool.isRequired,description:c().string,advanced:c().bool.isRequired,parametrized:c().bool.isRequired,params:c().arrayOf(c().shape({param:c().string,description:c().string.isRequired}))};function w(e){let{name:t,description:n,required:a}=e;return s.createElement("li",null,s.createElement("code",null,`{${t}}`)," - ",n,a&&s.createElement("span",{className:"_-web-client-js-react-components-___PlaceholderInfo-module__required___2sidJ"},"(",s.createElement(d.vN,null,"required"),")"))}function D(e){let{name:t,required:n,params:a}=e;return a.map((e=>{let{param:a,description:i}=e;return s.createElement(w,{key:a?`${t}:${a}`:t,name:a?`${t}:${a}`:t,required:n,description:i})}))}function N(e){let{placeholders:t}=e;return s.createElement("ul",{className:"_-web-client-js-react-components-___PlaceholderInfo-module__placeholder-info___wLKRw"},t.filter((e=>e.description)).map((e=>s.createElement(w,(0,a.Z)({key:e.name},e)))),t.filter((e=>e.parametrized)).map((e=>s.createElement(D,(0,a.Z)({key:e.name},e)))))}function S(e){let{placeholders:t}=e;const n=t.filter((e=>!e.advanced)),a=t.filter((e=>e.advanced)),i=[{key:"simple",title:d.vN.string("Available placeholders"),content:{content:s.createElement(N,{placeholders:n})}}];return a.length>0&&i.push({key:"advanced",title:d.vN.string("Advanced placeholders"),content:{content:s.createElement(N,{placeholders:a})}}),s.createElement(E.Z,{defaultActiveIndex:[0],panels:i,exclusive:!1,styled:!0,fluid:!0})}w.propTypes={name:c().string.isRequired,required:c().bool.isRequired,description:c().string.isRequired},D.propTypes=j,N.propTypes={placeholders:c().arrayOf(c().shape(j)).isRequired},S.propTypes={placeholders:c().arrayOf(c().shape(j)).isRequired};var I=n(54397),q=n(54733);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){let{onClose:t,onSubmit:n,senders:a,sentEmailsCount:i,previewURL:r,previewContext:l,placeholders:o,recipientsField:c,initialFormValues:u}=e;const[m,p]=(0,s.useState)(null),g=s.createElement(y.Z.Field,{style:{marginRight:"auto"}},s.createElement(h.FormSpy,{subscription:{values:!0}},(e=>{let{values:t}=e;return s.createElement(f.Z,{type:"button",active:!!m,onClick:()=>(async e=>{let{body:t,subject:n}=e;if(m)return void p(void 0);t=t.getData?t.getData():t;const{data:a}=await _.l2.post(r,C({body:t,subject:n},l));p(a)})(t)},m?s.createElement(d.vN,null,"Edit"):s.createElement(d.vN,null,"Preview"))}))),E=s.createElement(s.Fragment,null,m&&s.createElement(s.Fragment,null,s.createElement(b.Z,{info:!0},s.createElement(d.vN,{as:b.Z.Header},"This preview is only shown for a single recipient."),s.createElement(d.vN,null,"When sending the emails, each recipient will receive an email customized with their personal data.")),s.createElement(y.Z.Field,null,s.createElement(d.vN,{as:"label"},"Subject"),m.subject),s.createElement(y.Z.Field,null,s.createElement(d.vN,{as:"label"},"Email body"),s.createElement(I.Z,{value:m.body,config:{showToolbar:!1},onChange:e=>e,onFocus:e=>e,onBlur:e=>e,disabled:!0}))),s.createElement(y.Z.Field,{style:{display:m?"none":"block"}},s.createElement(v.yZ,{name:"from_address",label:d.vN.string("From"),scrolling:!0,selection:!0,options:a.map((e=>{let[t,n]=e;return{value:t,text:n}})),required:!0}),s.createElement(v._t,{name:"subject",label:d.vN.string("Subject"),required:!0}),s.createElement(I.c,{name:"body",label:d.vN.string("Email body"),required:!0,config:{images:!1}}),o.length>0&&s.createElement(y.Z.Field,null,s.createElement(S,{placeholders:o})),c,s.createElement(v.fw,{name:"copy_for_sender",label:d.vN.string("Send copy of each email to my mailbox"),toggle:!0})));return s.createElement(q.Yp,{id:"send-email",size:"standard",header:d.vN.string("Send email"),initialValues:C({from_address:a[0][0],subject:"",body:"",copy_for_sender:!1},u),onClose:t,onSubmit:n,submitLabel:d.vN.string("Send"),extraActions:e=>{let{submitSucceeded:t}=e;return!t&&g},disabledUntilChange:!1,disabledAfterSubmit:!0,unloadPrompt:!0},(e=>{let{submitSucceeded:t}=e;return t?s.createElement(b.Z,{positive:!0},s.createElement(d.vN,{as:b.Z.Header},"Your email has been sent."),s.createElement(d.Gb,{count:i,as:"p"},s.createElement(d.CJ,null,s.createElement(d.dO,{name:"count",value:i})," email has been sent."),s.createElement(d.CN,null,s.createElement(d.dO,{name:"count",value:i})," emails have been sent."))):E}))}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){let{context:t,metadataURL:n,previewURL:a,sendURL:i,onClose:r}=e;const[l,o]=(0,s.useState)(0),{data:c,loading:u}=(0,g.K3)({url:n,method:"POST",data:t}),{senders:h=[],subject:y,body:f,placeholders:b=[]}=c||{},E=[{name:"speaker",title:d.vN.string("Speaker")},{name:"author",title:d.vN.string("Author")},{name:"coauthor",title:d.vN.string("Co-author")},{name:"submitter",title:d.vN.string("Submitter")}];return u?s.createElement(m.Z,{active:!0,page:!0,inverted:!0},s.createElement(p.Z,null)):s.createElement(O,{onSubmit:async e=>{const n=Z(Z({},e),t);let a;n.body=n.body.getData?n.body.getData():n.body;try{a=await _.l2.post(i,n)}catch(e){return(0,v.qf)(e)}o(a.data.count),setTimeout((()=>r()),5e3)},onClose:r,senders:h,previewURL:a,placeholders:b,initialFormValues:{subject:y,body:f,recipient_roles:[]},sentEmailsCount:l,recipientsField:s.createElement(v.yZ,{name:"recipient_roles",label:d.vN.string("Send emails to these roles"),multiple:!0,selection:!0,options:E.map((e=>{let{name:t,title:n}=e;return{value:t,text:n,key:t}})),required:!0})})}O.propTypes={onClose:c().func.isRequired,onSubmit:c().func.isRequired,senders:c().array.isRequired,sentEmailsCount:c().number,previewURL:c().string.isRequired,previewContext:c().object,placeholders:c().array.isRequired,recipientsField:c().node.isRequired,initialFormValues:c().object},O.defaultProps={previewContext:{},initialFormValues:{},sentEmailsCount:0},P.propTypes={context:c().object.isRequired,metadataURL:c().string.isRequired,previewURL:c().string.isRequired,sendURL:c().string.isRequired,onClose:c().func.isRequired};const x=e=>Array.from(document.querySelectorAll(e)).filter((e=>e.offsetWidth>0||e.offsetHeight>0)).map((e=>+e.value));function F(e){let{objectContext:t,idSelector:n,metadataURL:a,previewURL:i,sendURL:r}=e;const[l,o]=(0,s.useState)(!1),c=x(n),u={abstracts:"abstract_id",contributions:"contribution_id"}[t];return s.createElement(s.Fragment,null,s.createElement("button",{type:"button",className:"i-button icon-mail js-requires-selected-row disabled",id:"email-roles-trigger",onClick:()=>o(!0)},s.createElement(d.vN,null,"Email")),l&&s.createElement(P,{context:{[u]:c},metadataURL:a,previewURL:i,sendURL:r,onClose:()=>o(!1)}))}F.propTypes={objectContext:c().oneOf(["abstracts","contributions"]).isRequired,idSelector:c().string.isRequired,metadataURL:c().string.isRequired,previewURL:c().string.isRequired,sendURL:c().string.isRequired};var A=n(63025),U=n(4070),T=n(59965),L=n(37314);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const B=A.ZP.bind(null,{endpoint:"persons.api_email_event_persons_metadata",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"persons",isDynamic:!1},{data:"/",isDynamic:!1},{data:"email",isDynamic:!1},{data:"/",isDynamic:!1},{data:"metadata",isDynamic:!1}]}]},"/"),V=A.ZP.bind(null,{endpoint:"persons.api_email_event_persons_send",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"persons",isDynamic:!1},{data:"/",isDynamic:!1},{data:"email",isDynamic:!1},{data:"/",isDynamic:!1},{data:"send",isDynamic:!1}]}]},"/"),H=A.ZP.bind(null,{endpoint:"persons.email_event_persons_preview",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"persons",isDynamic:!1},{data:"/",isDynamic:!1},{data:"email",isDynamic:!1},{data:"/",isDynamic:!1},{data:"preview",isDynamic:!1}]}]},"/");function K(e){let{eventId:t,personIds:n,roleIds:a,userIds:i,onClose:r,noAccount:l,notInvitedOnly:o}=e;const[c,u]=(0,s.useState)(0),h={person_id:n,role_id:a,user_id:i,no_account:l,not_invited_only:o},{data:f,loading:b}=(0,g.K3)({url:B({event_id:t}),method:"POST",data:h}),{senders:E=[],recipients:j=[],subject:w,body:D,placeholders:N=[]}=f||{};return b?s.createElement(m.Z,{active:!0,page:!0,inverted:!0},s.createElement(p.Z,null)):s.createElement(O,{onSubmit:async e=>{const n=z(z({},e),h);let a;n.body=n.body.getData?n.body.getData():n.body;try{a=await _.l2.post(V({event_id:t}),n)}catch(e){return(0,v.qf)(e)}u(a.data.count),setTimeout((()=>r()),5e3)},onClose:r,senders:E,recipients:j,previewURL:H({event_id:t}),previewContext:{noAccount:l},placeholders:N,initialFormValues:{subject:w,body:D},sentEmailsCount:c,recipientsField:s.createElement(y.Z.Field,null,s.createElement(d.vN,{as:"label"},"Recipients"),s.createElement(U.Z,{value:j.join(", "),readOnly:!0,icon:navigator.clipboard&&s.createElement(T.Z,{content:d.vN.string("Copied!"),on:"click",position:"top center",inverted:!0,trigger:s.createElement(L.Z,{name:"copy",color:"black",title:d.vN.string("Copy to clipboard"),onClick:()=>navigator.clipboard.writeText(j.join(", ")),link:!0})})}))})}function Q(e){let{eventId:t,roleId:n,personSelector:a,userSelector:i,triggerSelector:r,noAccount:l,notInvitedOnly:o}=e;const[c,u]=(0,s.useState)(!1),m=x(a),p=x(i);return(0,s.useEffect)((()=>{if(!r)return;const e=()=>u(!0),t=document.querySelector(r);return t.addEventListener("click",e),()=>t.removeEventListener("click",e)}),[r]),s.createElement(s.Fragment,null,!r&&s.createElement(d.vN,{as:f.Z,onClick:()=>u(!0)},"Send email"),c&&s.createElement(K,{eventId:t,personIds:m,userIds:p,roleIds:n&&[n],noAccount:l,notInvitedOnly:o,onClose:()=>u(!1)}))}K.propTypes={eventId:c().number.isRequired,personIds:c().arrayOf(c().number),userIds:c().arrayOf(c().number),roleIds:c().arrayOf(c().number),onClose:c().func.isRequired,noAccount:c().bool,notInvitedOnly:c().bool},K.defaultProps={personIds:[],userIds:[],roleIds:[],noAccount:!1,notInvitedOnly:!1},Q.propTypes={eventId:c().number.isRequired,roleId:c().number,personSelector:c().string,userSelector:c().string,triggerSelector:c().string,noAccount:c().bool,notInvitedOnly:c().bool},Q.defaultProps={roleId:void 0,personSelector:void 0,userSelector:void 0,triggerSelector:void 0,noAccount:!1,notInvitedOnly:!1};var W=n(28995),Y=n(17816),J=n(72963),X=n(89793),G=n.n(X),ee=n(53806),te=n.n(ee),ne=n(74763),ae=n(68301),ie=n(75723),re=n(8892),se=n(5163);const le=A.ZP.bind(null,{endpoint:"categories.event_search",rules:[{args:["category_id"],converters:{category_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1},{data:"/",isDynamic:!1},{data:"search-for-series",isDynamic:!1}]}]},"/"),oe=A.ZP.bind(null,{endpoint:"event_series.event_series",rules:[{args:["series_id"],converters:{series_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event-series",isDynamic:!1},{data:"/",isDynamic:!1},{data:"series_id",isDynamic:!0}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event-series",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),ce=A.ZP.bind(null,{endpoint:"events.single_event_api",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"info-for-series",isDynamic:!1}]}]},"/"),de=(0,se.c)(250),ue=(0,se.c)(250);function me(e){let{eventId:t,categoryId:n,seriesId:a,timezone:i}=e;const r=null!==a,[l,o]=(0,s.useState)(!1),{loading:c,reFetch:u,data:v}=(0,g.K3)(r?oe({series_id:a}):ce({event_id:t}),{manual:!0}),_=async()=>{await u(),o(!0)},h=v?r?v:{id:null,events:[v],show_sequence_in_title:!1,show_links:!1,event_title_pattern:""}:null;return s.createElement(s.Fragment,null,r?s.createElement(re.IButton,{borderless:!0,icon:"stack",title:d.vN.string("Manage event series"),onClick:_},s.createElement(d.vN,null,"Manage series")):s.createElement(re.IButton,{borderless:!0,icon:"stack",title:d.vN.string("Create event series"),onClick:_},s.createElement(d.vN,null,"Create series")),s.createElement(m.Z,{active:c,page:!0,inverted:!0},s.createElement(p.Z,null)),l&&s.createElement(pe,{currentEventId:t,categoryId:n,timezone:i,series:h,onClose:()=>{o(!1)}}))}function pe(e){let{currentEventId:t,categoryId:n,series:a,timezone:i,onClose:r}=e;const[l,o]=(0,s.useState)(!1),c=null!==a.id,u=e=>te()(e).tz(i);return s.createElement(s.Fragment,null,s.createElement(q.Yp,{id:"event-series",header:c?d.vN.string("Manage series"):d.vN.string("Create series"),size:"standard",alignTop:!0,onSubmit:async(e,t)=>{const n=c?(0,q.k4)(e,t):(0,q.hS)(e,t);n.events&&(n.event_ids=n.events.map((e=>e.id)),delete n.events);try{c?await _.l2.patch(oe({series_id:a.id}),n):await _.l2.post(oe(),n)}catch(e){return(0,v.qf)(e,{event_ids:"events"})}location.reload(),await new Promise((()=>{}))},onClose:r,initialValues:a,disabledUntilChange:c,extraActions:e=>c&&s.createElement(f.Z,{style:{marginRight:"auto"},onClick:()=>o(!0),disabled:e.submitting,negative:!0},s.createElement(d.vN,null,"Delete series")),submitLabel:c?d.vN.string("Update series"):d.vN.string("Create series")},(()=>s.createElement(s.Fragment,null,s.createElement(v.HS,{name:"events",isEqual:(e,t)=>G()((e||[]).map((e=>e.id)),(t||[]).map((e=>e.id))),validate:e=>{if(!e.length)return d.vN.string("A series needs to contain at least one event.")},component:ve,localMoment:u,categoryId:n,currentEventId:t,existingSeriesId:a.id,divider:s.createElement(ne.Z,{horizontal:!0},c?s.createElement(d.vN,null,"Events in series"):s.createElement(d.vN,null,"Events to add"))}),s.createElement(ne.Z,{horizontal:!0},s.createElement(d.vN,null,"Series options")),s.createElement(v.fw,{name:"show_sequence_in_title",label:d.vN.string("Show the sequence number in the event titles (lectures only)")}),s.createElement(v.fw,{name:"show_links",label:d.vN.string("Show links to the other events of the series on the main event page")}),s.createElement(v._t,{name:"event_title_pattern",label:d.vN.string("Event title pattern"),description:s.createElement(d.vN,null,"Title pattern for cloned events. Must contain the"," ",s.createElement(d.dO,{name:"placeholder",wrapper:s.createElement("code",null),value:"{n}"})," placeholder which will indicate the new event's position in the series."),validate:e=>{if(e&&!e.includes("{n}"))return d.vN.string("Title pattern must contain the {placeholder} placeholder",{placeholder:"{n}"})}})))),s.createElement(re.RequestConfirmDelete,{open:l,onClose:()=>o(!1),requestFunc:async()=>{try{await _.l2.delete(oe({series_id:a.id}))}catch(e){return(0,_.zZ)(e),!0}location.reload()},persistent:!0},s.createElement(d.vN,null,"Do you really want to delete this series? The associated events will not be deleted.")))}function ve(e){let{value:t,onChange:n,onFocus:a,onBlur:i,divider:r,localMoment:l,categoryId:o,currentEventId:c,existingSeriesId:u}=e;const[m,p]=(0,s.useState)(void 0),[v,g]=(0,s.useState)([]),[h,y]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),E=null!==u,j=async e=>{let t;try{t=await ue((()=>_.l2.get(ce({event_id:+e}))))}catch(e){return void(0,_.zZ)(e)}if(null===t.data)b(d.vN.string("No event found with this ID."));else if(t.data.can_access){if(t.data.category_chain)return g([t.data]),b(null),void y(!1);b(d.vN.string("This event is unlisted."))}else b(d.vN.string("You don't have rights to access this event."));y(!1),g([])},w=new Set(t.map((e=>e.id))),D=v.map((e=>({key:e.id,value:e.id,text:e.title,disabled:!e.can_manage||!e.category_chain||e.series_id!==u&&null!==e.series_id||w.has(e.id),content:s.createElement("div",{className:"events-management-client-js-___SeriesManagement-module__list-flex___DE65m"},s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__date-span___8yRl2"},l(e.start_dt).format("ll")),s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__event-title___961dm"},e.title,s.createElement("br",null),s.createElement(re.TooltipIfTruncated,null,s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__category-chain___SNXOv"},e.category_chain?e.category_chain.join(" » "):s.createElement(d.vN,null,"Unlisted"))),!e.can_manage&&s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__warning-reason___ag6NQ"},s.createElement("br",null),s.createElement(d.vN,null,"You do not have editing rights for this event.")),!e.category_chain&&s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__warning-reason___ag6NQ"},s.createElement("br",null),s.createElement(d.vN,null,"This event is unlisted.")),e.series_id!==u&&null!==e.series_id&&s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__warning-reason___ag6NQ"},s.createElement("br",null),s.createElement(d.vN,null,"This event is already part of a different series.")),w.has(e.id)&&s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__positive-note___TNVKv"},s.createElement("br",null),s.createElement(d.vN,null,"This event is already part of this series."))))})));return s.createElement(s.Fragment,null,s.createElement(ae.Z,{fluid:!0,selection:!0,search:e=>e,icon:"search",selectOnBlur:!1,selectOnNavigation:!1,placeholder:d.vN.string("Search for an event title or paste an event URL or event ID (#123)"),options:D,value:null,loading:h,onSearchChange:async(e,t)=>{let{searchQuery:n}=t;if(p(n),n=n.trim(),b(null),!n)return y(!1),void g([]);const a=new RegExp(`^${location.origin.replace("/","\\/")}\\/event\\/([0-9]+)`),i=n.match(a);i?(y(!0),j(i[1])):/^#([0-9])+$/.test(n)?(y(!0),j(n.substr(1))):"#"!==n&&(y(!0),(async e=>{let t;try{t=await de((()=>_.l2.get(le({category_id:o,q:e}))))}catch(e){return void(0,_.zZ)(e)}g(t.data),b(null),y(!1)})(n))},searchQuery:m,onChange:(e,a)=>{let{value:i}=a;const r=v.find((e=>e.id===i)),s=[...t,r].sort(((e,t)=>te()(e.start_dt)-te()(t.start_dt)));n(s)},onFocus:a,onBlur:i,noResultsMessage:h?d.vN.string("Searching..."):null!==f?f:m?d.vN.string("No results found."):d.vN.string("Enter search term")}),r,s.createElement(ie.Z,{divided:!0,relaxed:!0,className:"events-management-client-js-___SeriesManagement-module__evt-list___PkKqH"},t.map((e=>s.createElement(ie.Z.Item,{key:e.id,className:"events-management-client-js-___SeriesManagement-module__evt-item___5iu8a"},s.createElement(ie.Z.Content,null,s.createElement("div",{className:"events-management-client-js-___SeriesManagement-module__list-flex___DE65m"},s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__date-span___8yRl2"},l(e.start_dt).format("ll"),s.createElement("br",null),c===e.id&&s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__positive-note___TNVKv"},"(",s.createElement(d.vN,null,"this event"),")")),s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__event-title___961dm"},e.title,s.createElement("br",null),s.createElement(re.TooltipIfTruncated,null,s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__detail___mXZyy"},e.category_chain?e.category_chain.join(" » "):s.createElement("span",{className:"events-management-client-js-___SeriesManagement-module__warning-reason___ag6NQ"},s.createElement(d.vN,null,"Unlisted"))))),(c!==e.id||E)&&s.createElement(T.Z,{trigger:s.createElement(L.Z,{className:"events-management-client-js-___SeriesManagement-module__delete-button___BZmEH",name:"close",onClick:()=>{a(),i(),n(t.filter((t=>t.id!==e.id)))},link:!0}),content:d.vN.string("Remove from event series"),position:"bottom center"}))))))))}me.propTypes={eventId:c().number.isRequired,categoryId:c().number.isRequired,timezone:c().string.isRequired,seriesId:c().number},me.defaultProps={seriesId:null},pe.propTypes={currentEventId:c().number.isRequired,categoryId:c().number.isRequired,series:c().shape({id:c().number,events:c().arrayOf(c().object).isRequired,show_sequence_in_title:c().bool.isRequired,show_links:c().bool.isRequired,event_title_pattern:c().string.isRequired}).isRequired,timezone:c().string.isRequired,onClose:c().func.isRequired},ve.propTypes={value:c().arrayOf(c().object).isRequired,onChange:c().func.isRequired,divider:c().node.isRequired,localMoment:c().func.isRequired,categoryId:c().number.isRequired,currentEventId:c().number.isRequired,existingSeriesId:c().number,onFocus:c().func.isRequired,onBlur:c().func.isRequired},ve.defaultProps={existingSeriesId:null},function(e){function t(){$("#person-filters ul > li").removeClass("enabled");const e=$(".js-event-person-list tr[data-person-roles]"),t=$(".js-event-person-list [data-filter]:checked").map((function(){const e=$(this);return e.closest("li").addClass("enabled"),e.data("filter")})).get(),n=e.filter(((e,n)=>!t.length||t.find((e=>$(n).data("person-roles")[e]))));e.addClass("hidden"),n.removeClass("hidden"),$(".js-event-person-list").trigger("indico:syncEnableIfChecked")}function n(){$(".js-reset-role-filter").toggleClass("disabled",0===$("#person-filters [data-filter]:checked").length)}function i(){$(".js-show-regforms").qtip({content:{text(){return $(this).data("title")}},hide:{delay:100,fixed:!0}})}e.setupEmailButton=function(e,t){const n=document.querySelector(e),{eventId:i,roleId:r,personSelector:o,userSelector:c}=n.dataset,d={};void 0!==n.dataset.noAccount&&(d.noAccount=!0),void 0!==n.dataset.notInvitedOnly&&(d.notInvitedOnly=!0),l.render(s.createElement(Q,(0,a.Z)({eventId:+i,roleId:r&&+r,personSelector:o,userSelector:c,triggerSelector:t},d)),n)},e.setupEmailContribAbstractRoles=function(e){const t=document.querySelector(e),{objectContext:n,idSelector:a,metadataUrl:i,previewUrl:r,sendUrl:o}=t.dataset;l.render(s.createElement(F,{objectContext:n,idSelector:a,metadataURL:i,previewURL:r,sendURL:o}),t)},e.setupEventManagementActionMenu=function(){const e=document.querySelector("#event-action-move-container");e&&l.render(s.createElement(J.BN,{eventId:+e.dataset.eventId,currentCategoryId:+e.dataset.categoryId,hasPendingMoveRequest:void 0!==e.dataset.pendingRequest}),e);const t=document.querySelector("#event-action-manage-series-container");if(t){const e=void 0!==t.dataset.seriesId?+t.dataset.seriesId:null;l.render(s.createElement(me,{eventId:+t.dataset.eventId,categoryId:+t.dataset.categoryId,timezone:t.dataset.timezone,seriesId:e}),t)}const n=document.querySelector("#event-action-publish-container");n&&l.render(s.createElement(J.CT,{eventId:+n.dataset.eventId,hasPendingPublishRequest:void 0!==n.dataset.pendingRequest}),n),$("#event-action-menu-clones-target").qbubble({content:{text:$("#event-action-menu-clones")}}),$("#event-action-menu-actions-target").qbubble({content:{text:$("#event-action-menu-actions")},style:{classes:"qtip-allow-overflow"}});$(["#event-action-menu-actions button:not(.js-dropdown)","#event-action-menu-actions a:not(.disabled)"].join(", ")).on("click",(function(){$("#event-action-menu-actions-target").qbubble("hide")}))},e.setupEventPersonsList=function(e){e=$.extend({hasNoAccountFilter:!1,hasNoRegistrationFilter:!1,hasNoBuiltinRolesFilter:!1},e);const a=setupSearchBox({itemHandle:"tr",listItems:"#event-participants-list tbody tr:not(.hidden)",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"});enableIfChecked(".js-event-person-list",".select-row:visible",".js-event-person-list .js-requires-selected-row"),$(".js-event-person-list").closest(".ui-dialog").length&&$(".js-event-person-list [data-toggle=dropdown]").closest(".toolbar").dropdown(),$(".js-event-person-list [data-filter]").on("click",t),$(".js-event-person-list td").on("mouseenter",(function(){const e=$(this);this.offsetWidth<this.scrollWidth&&!e.attr("title")&&e.attr("title",e.text())})),$(".js-event-person-list .tablesorter").tablesorter({cssAsc:"header-sort-asc",cssDesc:"header-sort-desc",headerTemplate:"",sortList:[[1,0]]});const s=$(".js-event-person-list .roles-column > span");s.qbubble({show:{event:"mouseover"},hide:{fixed:!0,delay:100,event:"mouseleave"},position:{my:"left center",at:"right center"},content:{text(){const e=$(this),t=$("<div>"),n=$("<strong>",{text:$(this).data("role-name")});if(t.append(n),e.is(".js-count-label")){const n=$("<ul>",{class:"qbubble-item-list"}),a=r()(e.data("items")).sort((function(e,t){return(0,Y.U)(e.title.toLowerCase(),t.title.toLowerCase())}));$.each(a,(function(){const e=$("<li>");this.url?e.append($("<a>",{text:this.title,href:this.url})):e.text(this.title),n.append(e)})),t.append(n)}return t}}}),s.filter(".custom").each((function(){const e=$(this);e.css("background-color",$.Color(e.css("color")).alpha(.1))})),e.hasNoAccountFilter&&($(".js-event-person-list [data-filter]:not(#filter-no-account)").on("change",(function(){$("#filter-no-account").prop("checked",!1),t(),a()})),$("#filter-no-account").on("change",(function(){this.checked&&$(".js-event-person-list [data-filter]:checked:not(#filter-no-account)").prop("checked",!1),t(),a()}))),e.hasNoRegistrationFilter&&($(".js-event-person-list [data-filter]:not(#filter-no-registration)").on("change",(function(){$("#filter-no-registration").prop("checked",!1),t(),a()})),$("#filter-no-registration").on("change",(function(){this.checked&&$(".js-event-person-list [data-filter]:checked:not(#filter-no-registration)").prop("checked",!1),t(),a()}))),e.hasNoBuiltinRolesFilter&&($(".js-event-person-list [data-filter]:not(#filter-no-builtin-roles)").on("change",(function(){$("#filter-no-builtin-roles").prop("checked",!1),t(),a()})),$("#filter-no-builtin-roles").on("change",(function(){this.checked&&$(".js-event-person-list [data-filter]:checked:not(#filter-no-builtin-roles)").prop("checked",!1),t(),a()}))),i();const l=$("#person-filters");l.find("li .colored-square").each((function(){const e=$(this);e.closest("li").css("background-color",$.Color(e.css("color")).alpha(.1))})),l.find(".js-reset-role-filter").on("click",(function(){$(".js-event-person-list [data-filter]").each((function(){const e=$(this);e.prop("checked",!1),e.parent().toggleClass("enabled",!1)})),t(),a(),n()})),l.find("li label").on("click",(function(e){e.preventDefault()})),l.find("li").on("click",(function(){const e=$(this).find("[data-filter]");e.prop("checked",!e.prop("checked")).trigger("change"),n()})),$("#event-participants-list").on("indico:htmlUpdated",i)},e.showUndoWarning=function(e,t,n){cornerMessage({message:e,progressMessage:W.$T.gettext("Undoing previous operation..."),feedbackMessage:t,actionLabel:W.$T.gettext("Undo"),actionCallback:n,duration:1e4,feedbackDuration:4e3,class:"warning"})},e.handleSelectedRowHighlight=function(e){const t=$("table.i-table input.select-row").on("change",(function(){$(this).closest("tr").toggleClass("selected",this.checked)}));e&&t.trigger("change")},e.showThemeSettingsForm=function(e){e=$.extend(!0,{formUrl:null,themeFieldId:null,lastFieldId:null},e),$(`#${e.themeFieldId}`).on("change",(function(){$.ajax({url:e.formUrl,data:{theme:$(this).val()},complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success(t){const n=$(`#${e.lastFieldId}`);n.nextAll(":not(.form-group-footer)").remove(),t.html&&n.after(t.html),t.js&&$("body").append(t.js)}})}))}}(window)}},e=>{e.O(0,[5514,3044,8592],(()=>{return t=48430,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_events.management.44b5e1d1.bundle.js.map