"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3913],{11747:(e,a,i)=>{var t=i(63025),n=i(89793),s=i.n(n),r=i(60216),l=i.n(r),d=i(32735),c=i(12788),u=i(25591),m=i(48060),o=i(57176),f=i(33344),y=i(19306),D=i(59090);const p=t.ZP.bind(null,{endpoint:"users.user_emails",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),b=t.ZP.bind(null,{endpoint:"users.user_profile_update",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/");function E(e){let{userId:a,userValues:i,currentAffiliation:t,titles:n,syncedValues:r,hasPredefinedAffiliations:l}=e;const c=null!==a?{user_id:a}:{},E=n.map((e=>({key:e.name,value:e.name,text:e.title})));return d.createElement("div",null,d.createElement(u.Form,{onSubmit:async(e,a)=>{const i=(0,f.k4)(e,a);l?i.affiliation_data&&(i.affiliation=i.affiliation_data.text.trim(),i.affiliation_id=i.affiliation_data.id,delete i.affiliation_data):delete i.affiliation_data;try{await D.l2.patch(b(c),i)}catch(e){return(0,f.qf)(e)}location.reload(),await new Promise((()=>{}))},initialValues:i,initialValuesEqual:s(),subscription:{}},(e=>d.createElement(m.Z,{onSubmit:e.handleSubmit},d.createElement(u.Field,{name:"synced_fields",isEqual:s(),render:()=>null}),d.createElement(f.yZ,{name:"title",options:E,selection:!0,parse:f.fQ.nullIfEmpty,label:y.vN.string("Title"),placeholder:y.vN.string("None")}),d.createElement(m.Z.Group,{widths:"equal"},d.createElement(o.zm,{name:"first_name",label:y.vN.string("First name"),required:!0,syncedValues:r}),d.createElement(o.zm,{name:"last_name",label:y.vN.string("Last name"),required:!0,syncedValues:r})),l?d.createElement(o.wp,{name:"affiliation_data",syncName:"affiliation",currentAffiliation:t,syncedValues:r}):d.createElement(o.zm,{name:"affiliation",label:y.vN.string("Affiliation"),syncedValues:r}),d.createElement(o.a0,{name:"address",label:y.vN.string("Address"),syncedValues:r}),d.createElement(o.zm,{name:"phone",label:y.vN.string("Phone number"),syncedValues:r}),d.createElement(o.zm,{name:"email",label:y.vN.string("Email address"),syncedValues:r,readOnly:!0},d.createElement(y.vN,null,"You can manage your email addresses"," ",d.createElement(y.dO,{name:"link",wrapper:d.createElement("a",{href:p(c)})},"here"),".")),d.createElement(f.Ei,{label:y.vN.string("Save changes"),className:"submit-button"})))))}E.propTypes={userId:l().number,userValues:l().object.isRequired,currentAffiliation:l().object,titles:l().arrayOf(l().shape({name:l().string.isRequired,title:l().string.isRequired})).isRequired,syncedValues:l().objectOf(l().string).isRequired,hasPredefinedAffiliations:l().bool.isRequired},E.defaultProps={userId:null,currentAffiliation:null},window.setupPersonalDataForm=function(e,a,i,t,n,s){document.addEventListener("DOMContentLoaded",(()=>{c.render(d.createElement(E,{userId:e,userValues:a,currentAffiliation:i,titles:t,syncedValues:n,hasPredefinedAffiliations:s}),document.querySelector("#personal-details-form-container"))}))}}},e=>{e.O(0,[5514,3044,8592],(()=>{return a=11747,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_users.personal_data.2eb01866.bundle.js.map