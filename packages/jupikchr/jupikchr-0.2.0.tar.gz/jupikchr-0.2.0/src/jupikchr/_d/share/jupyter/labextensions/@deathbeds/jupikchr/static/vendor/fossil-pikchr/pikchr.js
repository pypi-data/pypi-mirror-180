var initPikchrModule=(()=>{var n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(t){var e,r,i=void 0!==(t=t||{})?t:{};i.ready=new Promise((function(n,t){e=n,r=t}));var a=Object.assign({},i),o=[],u=(n,t)=>{throw t},c="";"undefined"!=typeof document&&document.currentScript&&(c=document.currentScript.src),n&&(c=n),c=0!==c.indexOf("blob:")?c.substr(0,c.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i.print||console.log.bind(console);var s,f=i.printErr||console.warn.bind(console);Object.assign(i,a),a=null,i.arguments&&(o=i.arguments),i.thisProgram&&i.thisProgram,i.quit&&(u=i.quit),i.wasmBinary&&(s=i.wasmBinary);var l=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&C("no native wasm support detected");var d,p,m,h,y,b,v,g=!1,w="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function A(n,t){return n?function(n,t,e){for(var r=t+e,i=t;n[i]&&!(i>=r);)++i;if(i-t>16&&n.buffer&&w)return w.decode(n.subarray(t,i));for(var a="";t<i;){var o=n[t++];if(128&o){var u=63&n[t++];if(192!=(224&o)){var c=63&n[t++];if((o=224==(240&o)?(15&o)<<12|u<<6|c:(7&o)<<18|u<<12|c<<6|63&n[t++])<65536)a+=String.fromCharCode(o);else{var s=o-65536;a+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else a+=String.fromCharCode((31&o)<<6|u)}else a+=String.fromCharCode(o)}return a}(p,n,t):""}i.INITIAL_MEMORY;var k,R,S,P,I=[],E=[],x=[],_=0,M=null,W=null;function C(n){i.onAbort&&i.onAbort(n),f(n="Aborted("+n+")"),g=!0,n+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(n);throw r(t),t}function H(n){return n.startsWith("data:application/octet-stream;base64,")}function O(n){try{if(n==k&&s)return new Uint8Array(s);throw"both async and sync fetching of the wasm failed"}catch(n){C(n)}}function j(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function U(n){for(;n.length>0;)n.shift()(i)}function B(n){return i["_"+n]}function D(n,t,e,r,i){var a={string:n=>{var t=0;if(null!=n&&0!==n){var e=1+(n.length<<2);!function(n,t,e){!function(n,t,e,r){if(!(r>0))return 0;for(var i=e+r-1,a=0;a<n.length;++a){var o=n.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&n.charCodeAt(++a)),o<=127){if(e>=i)break;t[e++]=o}else if(o<=2047){if(e+1>=i)break;t[e++]=192|o>>6,t[e++]=128|63&o}else if(o<=65535){if(e+2>=i)break;t[e++]=224|o>>12,t[e++]=128|o>>6&63,t[e++]=128|63&o}else{if(e+3>=i)break;t[e++]=240|o>>18,t[e++]=128|o>>12&63,t[e++]=128|o>>6&63,t[e++]=128|63&o}}t[e]=0}(n,p,t,e)}(n,t=z(e),e)}return t},array:n=>{var t,e,r=z(n.length);return t=n,e=r,d.set(t,e),r}},o=B(n),u=[],c=0;if(r)for(var s=0;s<r.length;s++){var f=a[e[s]];f?(0===c&&(c=V()),u[s]=f(r[s])):u[s]=r[s]}var l=o.apply(null,u);return function(n){return 0!==c&&q(c),function(n){return"string"===t?A(n):"boolean"===t?Boolean(n):n}(n)}(l)}H(k="pikchr.wasm")||(R=k,k=i.locateFile?i.locateFile(R,c):c+R);var F,T={a:function(n,t,e,r){C("Assertion failed: "+A(n)+", at: "+[t?A(t):"unknown filename",e,r?A(r):"unknown function"])},b:function(n){p.length,C("OOM")},c:function(n,t){var e;e=n,l||(i.onExit&&i.onExit(e),g=!0),u(e,new j(e))}},V=(function(){var n={a:T};function t(n,t){var e,r,a=n.exports;i.asm=a,e=i.asm.d.buffer,i.HEAP8=d=new Int8Array(e),i.HEAP16=m=new Int16Array(e),i.HEAP32=h=new Int32Array(e),i.HEAPU8=p=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=y=new Uint32Array(e),i.HEAPF32=b=new Float32Array(e),i.HEAPF64=v=new Float64Array(e),i.asm.g,r=i.asm.e,E.unshift(r),function(n){if(_--,i.monitorRunDependencies&&i.monitorRunDependencies(_),0==_&&(null!==M&&(clearInterval(M),M=null),W)){var t=W;W=null,t()}}()}function e(n){t(n.instance)}function a(t){return(s||"function"!=typeof fetch?Promise.resolve().then((function(){return O(k)})):fetch(k,{credentials:"same-origin"}).then((function(n){if(!n.ok)throw"failed to load wasm binary file at '"+k+"'";return n.arrayBuffer()})).catch((function(){return O(k)}))).then((function(t){return WebAssembly.instantiate(t,n)})).then((function(n){return n})).then(t,(function(n){f("failed to asynchronously prepare wasm: "+n),C(n)}))}if(_++,i.monitorRunDependencies&&i.monitorRunDependencies(_),i.instantiateWasm)try{return i.instantiateWasm(n,t)}catch(n){return f("Module.instantiateWasm callback failed with error: "+n),!1}(s||"function"!=typeof WebAssembly.instantiateStreaming||H(k)||"function"!=typeof fetch?a(e):fetch(k,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,n).then(e,(function(n){return f("wasm streaming compile failed: "+n),f("falling back to ArrayBuffer instantiation"),a(e)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.e).apply(null,arguments)},i._pikchr=function(){return(i._pikchr=i.asm.f).apply(null,arguments)},i.stackSave=function(){return(V=i.stackSave=i.asm.h).apply(null,arguments)}),q=i.stackRestore=function(){return(q=i.stackRestore=i.asm.i).apply(null,arguments)},z=i.stackAlloc=function(){return(z=i.stackAlloc=i.asm.j).apply(null,arguments)};function N(n){function t(){F||(F=!0,i.calledRun=!0,g||(U(E),e(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)n=i.postRun.shift(),x.unshift(n);var n;U(x)}()))}n=n||o,_>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)n=i.preRun.shift(),I.unshift(n);var n;U(I)}(),_>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t()))}if(i.stackSave=V,i.stackRestore=q,i.cwrap=function(n,t,e,r){var i=(e=e||[]).every((n=>"number"===n||"boolean"===n));return"string"!==t&&i&&!r?B(n):function(){return D(n,t,e,arguments)}},i.setValue=function(n,t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":d[n>>0]=t;break;case"i16":m[n>>1]=t;break;case"i32":h[n>>2]=t;break;case"i64":P=[t>>>0,(S=t,+Math.abs(S)>=1?S>0?(0|Math.min(+Math.floor(S/4294967296),4294967295))>>>0:~~+Math.ceil((S-+(~~S>>>0))/4294967296)>>>0:0)],h[n>>2]=P[0],h[n+4>>2]=P[1];break;case"float":b[n>>2]=t;break;case"double":v[n>>3]=t;break;case"*":y[n>>2]=t;break;default:C("invalid type for setValue: "+e)}},i.getValue=function(n,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return d[n>>0];case"i16":return m[n>>1];case"i32":case"i64":return h[n>>2];case"float":return b[n>>2];case"double":return v[n>>3];case"*":return y[n>>2];default:C("invalid type for getValue: "+t)}return null},W=function n(){F||N(),F||(W=n)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return N(),t.ready}})();"object"==typeof exports&&"object"==typeof module?module.exports=initPikchrModule:"function"==typeof define&&define.amd?define([],(function(){return initPikchrModule})):"object"==typeof exports&&(exports.initPikchrModule=initPikchrModule);