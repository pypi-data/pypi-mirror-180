"use strict";(self.webpackChunk_deathbeds_jupikchr=self.webpackChunk_deathbeds_jupikchr||[]).push([[91,247,26,346],{67:(e,n,t)=>{t.d(n,{U:()=>i});var i,r=t(432);!function(e){e.P_BOX=new r.LabIcon({name:"pikchr:p-box",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n  <g class="jp-icon-brand0 jp-icon-selectable" fill="#0288D1">\n    <path d="M9,7V17H11V13H13A2,2 0 0,0 15,11V9A2,2 0 0,0 13,7H9M11,9H13V11H11V9M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3Z" />\n  </g>\n</svg>\n'}),e.FIT=new r.LabIcon({name:"pikchr:fit",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n  <g class="jp-icon3 jp-icon-selectable" fill="#616161">\n    <path d="M20,2H4C2.89,2 2,2.89 2,4V20C2,21.11 2.89,22 4,22H20C21.11,22 22,21.11 22,20V4C22,2.89 21.11,2 20,2M20,20H4V4H20M13,8V10H11V8H9L12,5L15,8M16,15V13H14V11H16V9L19,12M10,13H8V15L5,12L8,9V11H10M15,16L12,19L9,16H11V14H13V16" />\n  </g>\n</svg>\n'})}(i||(i={}))},91:(e,n,t)=>{t.r(n),t.d(n,{CSS:()=>c.ux,CommandIDs:()=>c.TQ,DOT_PIKCHR:()=>c.nV,EMOJI:()=>c.Dd,ICONS:()=>i.U,JP_UI_FONT_FAMILY:()=>c.fj,LANGS:()=>c.ih,LAUNCHER_CATEGORY:()=>c.Jx,MIME_HTML:()=>a.MIME_HTML,MIME_TYPE:()=>a.MIME_TYPE,NAME:()=>c.A1,NS:()=>c.NS,PACKAGE:()=>c.iR,PALETTE_CATEGORY:()=>c.eo,PLUGIN_ID:()=>c.Uu,Pikchr:()=>d.O,PikchrModel:()=>s.PikchrModel,PikchrView:()=>s.PikchrView,RE_VIEWBOX:()=>c._r,RenderedPikchr:()=>a.RenderedPikchr,VERSION:()=>c.q4,markdownPlugin:()=>o.markdownPlugin,renderPikchrMarkdownIt:()=>r.renderPikchrMarkdownIt,rendererFactory:()=>a.rendererFactory});var i=t(67),r=t(26),a=t(458),o=t(247),d=t(143),c=t(342),s=t(346)},26:(e,n,t)=>{t.r(n),t.d(n,{renderPikchrMarkdownIt:()=>o});var i,r=t(143),a=t(342);function o(e){let{fence:n}=e.renderer.rules;e.renderer.rules.fence=(e,t,r,o,d)=>{const{info:c,content:s}=e[t],l=c.trim().split(/\s+/g)[0];if(!a.ih.includes(l))return n?n(e,t,r,o,d):"";const u=i.nextId(),m=`<img id="${u}" />`,h={pikchr:s,tag:"img",addDimensions:!0};return i.renderLater(h,u),m}}!function(e){e.pikchr=r.O.initialize();let n=0;async function t(){return await new Promise(((e,n)=>setTimeout(e,100)))}async function i(e,n,r=5){const o=document.getElementById(e);if(!o)return r>0?(await t(),await i(e,n,r-1)):void console.warn(`${a.Dd} failed to update placeholder`);o.outerHTML=n}e.nextId=function(){return"md-it-pikchr-"+n++},e.renderLater=async function n(r,o,d=5){let c;try{c=await e.pikchr.render(r)}catch{return d>0?(await t(),await n(r,o,d-1)):void console.warn(`${a.Dd} failed to render`)}await i(o,c)},e.replacePlaceholder=i}(i||(i={}))},247:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P,markdownPlugin:()=>M});var i=t(122),r=t(835),a=t(331),o=t(530),d=t(79),c=t(449),s=t(18),l=t(432),u=t(888),m=t(679),h=t(67),g=t(458),w=t(342),p=t(923);class k{constructor(e){this.commands=e}createNew(e,n){const t=new r.CommandToolbarButton({commands:this.commands,id:w.TQ.img}),i=new r.CommandToolbarButton({commands:this.commands,id:w.TQ.fit});return e.toolbar.insertItem(8,"img",t),e.toolbar.insertItem(9,"fit",i),new p.DisposableDelegate((()=>{i.dispose(),t.dispose()}))}}let _=null;const M=(0,m.simpleMarkdownItPlugin)(w.NS,{id:"pikchr",title:"pikchr",description:"pikchr diagrams",documentationUrls:{plugin:"https://github.com/deathbeds/jupikchr",pikchr:"https://pikchr.org"},examples:{pikchr:'\n  ```pikchr\n  arrow right 200% "Markdown" "Source"\n  box rad 10px "Markdown" "Formatter" "(markdown.c)" fit\n  arrow right 200% "HTML+SVG" "Output"\n  arrow <-> down 70% from last box.s\n  box same "Pikchr" "Formatter" "(pikchr.c)" fit\n  ```\n          '},plugin:async()=>{if(null!==_)return[_];const{renderPikchrMarkdownIt:e}=await t.e(26).then(t.bind(t,26));return[_=e]}}),v={id:`${w.NS}:widget`,requires:[u.IJupyterWidgetRegistry],autoStart:!0,activate:(e,n)=>{const i={name:w.NS,version:w.q4,exports:async()=>await t.e(346).then(t.bind(t,346))};n.registerWidget(i)}},f={id:`${w.NS}:codemirror`,autoStart:!0,requires:[a.ICodeMirror],activate:async(e,n)=>{const{definePikchrMode:i}=await t.e(582).then(t.t.bind(t,582,23));i(n)}},I={id:`${w.NS}:file`,autoStart:!0,optional:[s.ITranslator,o.IFileBrowserFactory,d.ILauncher,c.IMainMenu,r.ICommandPalette,i.IMimeDocumentTracker],activate:(e,n,t,i,a,o,d)=>{const{commands:c,contextMenu:u}=e,m=(n||s.nullTranslator).load(f.id);function p(){if(!d)return null;const{currentWidget:e}=d;if(!(e&&e instanceof r.MainAreaWidget))return null;const{renderer:n}=e.content;return n&&n instanceof g.RenderedPikchr?n:null}if(c.addCommand(w.TQ.createNew,{label:e=>e.isPalette||e.isContextMenu?m.__("New %1 File",w.A1):m.__("%1 File",w.A1),caption:m.__("Create a new %1 file",w.A1),icon:e=>e.isPalette?void 0:h.U.P_BOX,execute:async e=>{var n,i;const r=null!==(i=null!==(n=e.cwd)&&void 0!==n?n:null==t?void 0:t.defaultBrowser.model.path)&&void 0!==i?i:void 0,a=await c.execute("docmanager:new-untitled",{path:r,type:"file",ext:w.nV});return c.execute("docmanager:open",{path:a.path,factory:w.A1})}}),u.addItem({command:w.TQ.createNew,args:{isContextMenu:!0},selector:w.ux.CONTEXT_SELECTOR,rank:3}),d){c.addCommand(w.TQ.fit,{icon:h.U.FIT,caption:m.__("Toggle fit to container"),execute:async e=>{var n;return null===(n=p())||void 0===n?void 0:n.toggleFit()}}),c.addCommand(w.TQ.img,{icon:l.imageIcon,caption:m.__("Toggle image rendering"),execute:async e=>{var n;return null===(n=p())||void 0===n?void 0:n.toggleImage()}});const n=new k(c);e.docRegistry.addWidgetExtension(w.A1,n)}i&&i.add({command:w.TQ.createNew,category:w.Jx,rank:1}),o&&o.addItem({command:w.TQ.createNew,args:{isPalette:!0},category:w.eo}),a&&a.fileMenu.newMenu.addGroup([{command:w.TQ.createNew}],30)}},P=[M,v,f,I]},346:(e,n,t)=>{t.r(n),t.d(n,{PikchrModel:()=>c,PikchrView:()=>d});var i,r=t(888),a=t(143),o=t(342);class d extends r.DOMWidgetView{initialize(e){super.initialize(e),(this.luminoWidget||this.pWidget).addClass(o.ux.WIDGET),this.model.on("change:source change:dark_mode change:tag",this.onSourceChange,this),this.model.on("change:value",this.onValueChange,this)}render(){super.render(),this.onSourceChange(),this.onValueChange()}onValueChange(){this.el.innerHTML=this.model.get("value")}async onSourceChange(){const e=this.model.get("value"),n=await i.pikchr.render({pikchr:this.model.get("source"),darkMode:this.model.get("dark_mode"),tag:this.model.get("tag"),cssClass:this.model.get("css_class")});e!==n&&(this.model.set({value:n}),this.touch())}}class c extends r.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:c.model_name,_model_module:o.NS,_model_module_version:o.q4,_view_name:c.view_name,_view_module:o.NS,_view_module_version:o.q4,source:"",value:"",dark_mode:null,css_class:null}}initialize(e,n){super.initialize(e,n)}}c.model_name="PikchrModel",c.model_module=o.NS,c.model_module_version=o.q4,c.view_name="PikchrView",c.view_module=o.NS,c.view_module_version=o.q4,function(e){e.pikchr=a.O.initialize()}(i||(i={}))}}]);
//# sourceMappingURL=91.01fe2905b93d776b922d.js.map?v=01fe2905b93d776b922d