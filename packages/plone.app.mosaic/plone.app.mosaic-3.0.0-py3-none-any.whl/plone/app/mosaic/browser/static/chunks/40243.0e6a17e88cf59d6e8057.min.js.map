{"version":3,"file":"chunks/40243.0e6a17e88cf59d6e8057.min.js","mappings":"mGAQC,WACG,aAEA,IAAIA,EAAWC,QAAQC,KAAKC,MAAMC,QAAQ,yBAEtCC,EAASJ,QAAQC,KAAKC,MAAMC,QAAQ,eAKpCE,EAAmB,SAAUC,GAC/B,OAAOA,EAAOC,SAAS,yBAAyB,EAClD,EAEIC,EAAiB,gBACjBC,EAAqB,SAAUJ,GACjC,IAAIK,EAAO,aAAeN,EAAOO,eAAiB,YAAvC,iEACX,OAAON,EAAmB,MAAQK,EAAO,OAASA,CACpD,EAmEEX,EAASa,IAAI,aAAa,SAAUN,IA/BrB,SAAUA,GACzBA,EAAOO,WAAW,gBAAgB,WAChCP,EAAOQ,cAAcL,EAAmBJ,EAAiBC,IAC3D,GACF,CA4BIS,CAAWT,GAlBA,SAAUA,GACvB,IAAIU,EAAW,WACb,OAAOV,EAAOW,YAAY,eAC5B,EACAX,EAAOY,GAAGC,SAASC,UAAU,YAAa,CACxCC,KAAM,aACNC,QAAS,aACTN,SAAUA,IAEZV,EAAOY,GAAGC,SAASI,YAAY,YAAa,CAC1CC,KAAM,aACNH,KAAM,aACNL,SAAUA,GAEd,CAKIS,CAASnB,GApEC,SAAUA,GACtB,IAAIoB,EAbiB,SAAUpB,GAC/B,OAAOA,EAAOC,SAAS,sBAAuB,2BAChD,CAWsBoB,CAAiBrB,GACjCsB,EAAqB,WACvB,OAAOvB,EAAiBC,EAC1B,EACIuB,EAA2B,IAAIC,OAAOJ,EAAcK,QAAQ,iCAAiC,SAAUC,GACzG,MAAO,KAAOA,CAChB,IAAI,MACJ1B,EAAO2B,GAAG,oBAAoB,SAAUC,GACtCA,EAAEC,QAAUD,EAAEC,QAAQJ,QAAQF,EAA0BpB,EAAmBmB,KAC7E,IACAtB,EAAO2B,GAAG,WAAW,WACnB3B,EAAO8B,WAAWC,cAAc,OAAO,SAAUC,GAE/C,IADA,IAAsBC,EAAMC,EAAxBC,EAAIH,EAAMI,OACPD,KAGL,IADAD,GADAD,EAAOD,EAAMG,IACIE,KAAK,YACkC,IAAvCH,EAAUI,QAAQpC,GAAwB,CACzD,IAAIqC,EAAaN,EAAKO,OACtB,GAAIxC,EAAOyC,OAAOC,mBAAmBH,EAAWI,OAASrB,IAAsB,CAC7EiB,EAAWK,KAAO,EAClBL,EAAWM,MAAQzB,EACnBmB,EAAWO,KAAM,EACjBb,EAAKc,SACL,QACF,CACAd,EAAKW,KAAO,EACZX,EAAKY,MAAQzB,EACba,EAAKa,KAAM,CACb,CAEJ,GACF,GACF,CAoCIE,CAAQhD,GA5BA,SAAUA,GACpBA,EAAO2B,GAAG,eAAe,SAAUC,GACP,QAAtBA,EAAEqB,OAAOC,UAAsBlD,EAAOmD,IAAIC,SAASxB,EAAEqB,OAAQ/C,KAC/D0B,EAAEe,KAAO,YAEb,GACF,CAuBIU,CAAMrD,EACR,GAKN,CA/FA,E","sources":["webpack://plone-mosaic/./node_modules/tinymce/plugins/pagebreak/plugin.js"],"sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getSeparatorHtml = function (editor) {\n      return editor.getParam('pagebreak_separator', '<!-- pagebreak -->');\n    };\n    var shouldSplitBlock = function (editor) {\n      return editor.getParam('pagebreak_split_block', false);\n    };\n\n    var pageBreakClass = 'mce-pagebreak';\n    var getPlaceholderHtml = function (shouldSplitBlock) {\n      var html = '<img src=\"' + global.transparentSrc + '\" class=\"' + pageBreakClass + '\" data-mce-resize=\"false\" data-mce-placeholder />';\n      return shouldSplitBlock ? '<p>' + html + '</p>' : html;\n    };\n    var setup$1 = function (editor) {\n      var separatorHtml = getSeparatorHtml(editor);\n      var shouldSplitBlock$1 = function () {\n        return shouldSplitBlock(editor);\n      };\n      var pageBreakSeparatorRegExp = new RegExp(separatorHtml.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g, function (a) {\n        return '\\\\' + a;\n      }), 'gi');\n      editor.on('BeforeSetContent', function (e) {\n        e.content = e.content.replace(pageBreakSeparatorRegExp, getPlaceholderHtml(shouldSplitBlock$1()));\n      });\n      editor.on('PreInit', function () {\n        editor.serializer.addNodeFilter('img', function (nodes) {\n          var i = nodes.length, node, className;\n          while (i--) {\n            node = nodes[i];\n            className = node.attr('class');\n            if (className && className.indexOf(pageBreakClass) !== -1) {\n              var parentNode = node.parent;\n              if (editor.schema.getBlockElements()[parentNode.name] && shouldSplitBlock$1()) {\n                parentNode.type = 3;\n                parentNode.value = separatorHtml;\n                parentNode.raw = true;\n                node.remove();\n                continue;\n              }\n              node.type = 3;\n              node.value = separatorHtml;\n              node.raw = true;\n            }\n          }\n        });\n      });\n    };\n\n    var register$1 = function (editor) {\n      editor.addCommand('mcePageBreak', function () {\n        editor.insertContent(getPlaceholderHtml(shouldSplitBlock(editor)));\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('ResolveName', function (e) {\n        if (e.target.nodeName === 'IMG' && editor.dom.hasClass(e.target, pageBreakClass)) {\n          e.name = 'pagebreak';\n        }\n      });\n    };\n\n    var register = function (editor) {\n      var onAction = function () {\n        return editor.execCommand('mcePageBreak');\n      };\n      editor.ui.registry.addButton('pagebreak', {\n        icon: 'page-break',\n        tooltip: 'Page break',\n        onAction: onAction\n      });\n      editor.ui.registry.addMenuItem('pagebreak', {\n        text: 'Page break',\n        icon: 'page-break',\n        onAction: onAction\n      });\n    };\n\n    function Plugin () {\n      global$1.add('pagebreak', function (editor) {\n        register$1(editor);\n        register(editor);\n        setup$1(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"],"names":["global$1","tinymce","util","Tools","resolve","global","shouldSplitBlock","editor","getParam","pageBreakClass","getPlaceholderHtml","html","transparentSrc","add","addCommand","insertContent","register$1","onAction","execCommand","ui","registry","addButton","icon","tooltip","addMenuItem","text","register","separatorHtml","getSeparatorHtml","shouldSplitBlock$1","pageBreakSeparatorRegExp","RegExp","replace","a","on","e","content","serializer","addNodeFilter","nodes","node","className","i","length","attr","indexOf","parentNode","parent","schema","getBlockElements","name","type","value","raw","remove","setup$1","target","nodeName","dom","hasClass","setup"],"sourceRoot":""}